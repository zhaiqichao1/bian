# 比特币价格预测系统

这是一个基于LSTM深度学习模型的比特币价格预测系统，用于预测币安平台上比特币价格在10分钟后的涨跌趋势，并使用马丁格尔投注策略进行事件合约交易。

## 功能特点

- 使用双向LSTM神经网络预测比特币价格走势
- 综合利用多种技术指标（如MA、RSI、MACD、布林带等）
- 自动从币安获取实时和历史数据
- 实现马丁格尔投注策略，自动调整投注金额
- 大单交易检测和市场深度分析
- 情绪分析和恐慌贪婪指数集成
- 模拟事件合约交易，记录每笔交易并验证结果
- 定期生成绩效报告和可视化图表
- 可配置的预测参数和交易策略

## 马丁格尔投注策略

系统采用马丁格尔投注策略进行事件合约交易：
- 初始投注金额为5U
- 如果预测正确（赢），下次继续投注5U
- 如果预测错误（输），下次投注金额翻倍：
  - 第一次输后投注10U
  - 第二次连续输后投注30U
  - 第三次连续输后投注90U
  - 第四次连续输后投注250U
- 任何时候只要赢了，下次投注金额重置为5U

这种策略可以帮助在连续亏损后快速追回损失，同时控制风险。

## 安装依赖

在使用前，请先安装所需的Python包：

```bash
pip install -r requirements.txt
```

## 配置

首次运行程序时，会创建默认的`config.json`配置文件。您需要在此文件中填入币安API的密钥：

```json
{
    "api_key": "您的币安API Key",
    "api_secret": "您的币安API Secret",
    ...
}
```

您也可以根据需要调整其他参数，如预测时间间隔、模型结构、交易阈值等。

## 使用方法

### 基本运行

```bash
python bitcoin_prediction.py
```

首次运行时，程序会：
1. 要求输入币安API密钥（如果配置文件中未提供）
2. 下载历史数据并训练LSTM模型
3. 开始实时预测并模拟交易

### 快速启动（连续监控模式）

```bash
python start_continuous.py
```

这将直接启动连续实时监控模式，自动分析价格变化并进行交易。

### 其他启动选项

```bash
# 强制重新训练模型
python bitcoin_prediction.py --train

# 查看交易统计
python bitcoin_prediction.py --stats

# 执行历史回测
python bitcoin_prediction.py --backtest --days 30
```

## 输出说明

- 预测结果和交易记录会实时输出到控制台
- 详细日志保存在`bitcoin_prediction.log`文件中
- 交易记录保存在`simulation_records.json`文件中
- 每日绩效图表保存为`performance.png`

## 交互功能

在程序运行过程中：
- 按 's' 键查看交易统计信息
- 按 'q' 键退出程序

## 注意事项

- 本程序仅供学习和研究使用，不构成投资建议
- 虚拟货币交易具有高风险，请谨慎使用模拟交易结果
- 使用前请确保了解币安API的使用条款和限制
- 马丁格尔策略虽然可以帮助追回损失，但也可能导致连续大额亏损，请谨慎使用 